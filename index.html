<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodYum Supermarket</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.development.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.development.js"></script>
    <style>
        /* Compiled Tailwind CSS styles */
        .bg-gray-100 { background-color: #f3f4f6; }
        .flex { display: flex; }
        .items-center { align-items: center; }
        .justify-center { justify-content: center; }
        .min-h-screen { min-height: 100vh; }
        .w-full { width: 100%; }
        .max-w-4xl { max-width: 1024px; }
        .p-6 { padding: 1.5rem; }
        .bg-white { background-color: #ffffff; }
        .p-8 { padding: 2rem; }
        .rounded-lg { border-radius: 0.5rem; }
        .shadow-lg { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .text-center { text-align: center; }
        .text-2xl { font-size: 1.5rem; }
        .font-bold { font-weight: 700; }
        .mb-6 { margin-bottom: 1.5rem; }
        .fade-in { opacity: 0; animation: fadeIn 1s forwards; }
        @keyframes fadeIn { to { opacity: 1; } }
        .text-lg { font-size: 1.125rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .bg-blue-500 { background-color: #3b82f6; }
        .text-white { color: #ffffff; }
        .rounded { border-radius: 0.25rem; }
        .hover\:bg-blue-600:hover { background-color: #2563eb; }
        .grid { display: grid; }
        .grid-cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }
        .md\:grid-cols-5 { @media (min-width: 768px) { grid-template-columns: repeat(5, minmax(0, 1fr)); } }
        .gap-4 { gap: 1rem; }
        .product-card { transition: transform 0.2s; }
        .product-card:hover { transform: scale(1.05); }
        .bg-gray-50 { background-color: #f9fafb; }
        .cursor-pointer { cursor: pointer; }
        .selected { border: 2px solid #3b82f6; }
        .w-full { width: 100%; }
        .h-32 { height: 8rem; }
        .object-cover { object-fit: cover; }
        .mb-2 { margin-bottom: 0.5rem; }
        .font-semibold { font-weight: 600; }
        .mx-auto { margin-left: auto; margin-right: auto; }
        .block { display: block; }
        .disabled\:opacity-50:disabled { opacity: 0.5; }
        .space-x-4 { --tw-space-x-reverse: 0; margin-right: calc(1rem * var(--tw-space-x-reverse)); margin-left: calc(1rem * calc(1 - var(--tw-space-x-reverse))); }
        .flex-1 { flex: 1 1 0%; }
        .border { border-width: 1px; }
        .text-sm { font-size: 0.875rem; }
        .text-gray-500 { color: #6b7280; }
        .mt-1 { margin-top: 0.25rem; }
        .mt-8 { margin-top: 2rem; }
        .text-xl { font-size: 1.25rem; }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div id="root" class="w-full max-w-4xl p-6"></div>
    <script>
        const { useState, useEffect } = {
            useState: (initial) => [initial, (newValue) => {}],
            useEffect: (callback) => callback()
        };

        const App = () => {
            const [stage] = useState('stimulus');
            const [selectedStimulus] = useState(null);
            const [stimulusDisplayed] = useState(false);
            const [selectedProducts] = useState([]);
            const [surveyResponses] = useState({
                q1: [5, 5], q2: [5, 5], q3: [5, 5], q4: [5, 5], q5: [5, 5]
            });
            const [collectedData] = useState({});
            const [participantId] = useState(Math.random().toString(36).substr(2, 9));
            const [completionCode] = useState(Math.random().toString(36).substr(2, 6).toUpperCase());

            const stimuli = [
                { id: 1, text: "Did you know? FoodYum Supermarkets now offers a rewards program that encourages environmentally-friendly shopping. For every plant-based or low-carbon item you add to your cart, you will receive one entry into a raffle for Amazon gift cards. The more eco-friendly choices you make, the more chances you have to win." },
                { id: 2, text: "Did you know? Many consumers report feeling guilty or ashamed after purchasing high-carbon-emission foods. At FoodYum Supermarkets, we encourage you to reflect on your decisions: Are you making environmentally responsible choices? Are you shopping like a good citizen?" },
                { id: 3, text: "Did you know? Environmentally-friendly shopping isn’t just about products—it reflects your personal commitment to society and the planet. If you agree with the value of environmentally-friendly living, please let your choices listen to your values. Your shopping behavior at FoodYum Supermarkets is an extension of your good citizenship." }
            ];

            const products = [
                { id: 1, name: "Pork Burgers", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Pork+Burgers" },
                { id: 2, name: "Bread", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Bread" },
                { id: 3, name: "Fried Chicken", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Fried+Chicken" },
                { id: 4, name: "Sausage Pizza", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Sausage+Pizza" },
                { id: 5, name: "Fried Beef", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Fried+Beef" },
                { id: 6, name: "Vegan Salad", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Vegan+Salad" },
                { id: 7, name: "Veggie Burger", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Veggie+Burger" },
                { id: 8, name: "Mock Meat", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Mock+Meat" },
                { id: 9, name: "Apple Pie", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Apple+Pie" },
                { id: 10, name: "Ham Sandwich", price: 10, image: "https://via.placeholder.com/150/FFFFFF/000000?text=Ham+Sandwich" }
            ];

            const questions = [
                { id: 'q1', text: "In any community I might live in: It would be more important for me to", options: ["Get from the community", "Give to the community"] },
                { id: 'q2', text: "In any community I might live in: It would be more important for me to", options: ["Help others", "Watch out for my own good"] },
                { id: 'q3', text: "In any community I might live in: I would be more concerned about", options: ["What I received from the community", "What I contributed to the community"] },
                { id: 'q4', text: "In any community I might live in: The hard work I would do should", options: ["Benefit the community", "Benefit me"] },
                { id: 'q5', text: "In any community I might live in: My personal philosophy in dealing with the community would be", options: ["If I don’t look out for myself, nobody else will", "It’s better for me to give than to receive"] }
            ];

            useEffect(() => {
                if (stage === 'stimulus' && !selectedStimulus) {
                    const randomIndex = Math.floor(Math.random() * stimuli.length);
                    // setSelectedStimulus(stimuli[randomIndex]); // 暫時移除
                }
                // 暫時移除 setTimeout 邏輯
            }, []);

            document.getElementById('root').innerHTML = `
                <div class="bg-white p-8 rounded-lg shadow-lg text-center">
                    <h1 class="text-2xl font-bold mb-6">FoodYum Supermarket 實驗</h1>
                    <p class="text-lg mb-4">${selectedStimulus ? selectedStimulus.text : 'Loading...'}</p>
                </div>
            `;
        };

        App();
    </script>
</body>
</html>
